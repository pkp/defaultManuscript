/**
 * @file styles/objects/article_details.less
 *
 * Copyright (c) 2014-2020 Simon Fraser University
 * Copyright (c) 2003-2020 John Willinsky
 * Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.
 *
 * @brief Styles applying to a view of an article with all details
 * @link templates/frontend/objects/article_details.tpl
 */
.obj_article_details {

	// Main Article Title
	.page_title {
		// Should inherit h1 styles from components.less (font-family, size, weight)
		margin-bottom: @base;
	}

	.subtitle {
		font-family: @font;
		font-size: 1.2em; // Slightly larger subtitle
		font-style: italic;
		margin-bottom: @double;
		color: @text-light-accessible; // Changed from @text-light
	}

	// Authors block at the top
	// Assuming this .authors class is used for the primary author list at the top.
	// If there's a different class or structure, this would need adjustment.
	.authors {
		font-family: @font-heading;
		font-size: 1.1em; // Slightly larger than base text
		margin-bottom: @base;
		line-height: 1.6; // Ensure good line height for wrapped author lists

		.author_name { // Class for individual author names
			font-weight: @bold;
		}

		.affiliation { // Class for affiliations
			font-size: 0.9em;
			color: @text-light-accessible; // Changed from @text-light
			margin-left: 0.5em;
		}
		// ORCID styling will be handled separately to avoid complexity here
	}

	// DOI block at the top
	.doi {
		font-family: @font-heading; // Keep font consistent
		margin-bottom: @double;

		a {
			color: @primary; // Ensure DOI link uses primary color
			text-decoration: none;
			word-break: break-all; // Prevent long DOIs from breaking layout

			&:hover,
			&:focus {
				text-decoration: underline;
			}
		}
	}

	// The original .orcid a and .doi a rules might be too general or conflict.
	// .doi a is now handled above. .orcid a will be addressed next.
	// The original .authors li rule is also deferred for clarity.

	// ORCID icon styling within the main .authors list
	.authors .orcid-icon { // Assuming <img class="orcid-icon"> or <span class="orcid-icon">
		display: inline-block;
		width: 1em; // Relative to parent (.authors) font-size
		height: 1em; // Relative to parent (.authors) font-size
		vertical-align: middle;
		margin-left: 0.3em;
		position: relative; // For fine-tuning
		top: -0.1em; // Adjust as needed for specific icon
	}

	// Specific styling for the .authors li that is likely for author biographies
	// to avoid conflict with any potential <li> usage in the top authors list.
	.author_bios .authors_list > li { // Assuming a structure like .author_bios > ul.authors_list > li
		margin-bottom: @double;
		padding-left: 0; // Reset any list padding if needed
		list-style-type: none; // Remove bullets if it's a list of bios
	}
	// Comment out or remove the old generic .orcid a and .authors li if they are now handled
	// .orcid a { ... } // Handled by .authors .orcid-icon or direct link styling if applicable
	// .authors li { ... } // Handled by .author_bios .authors_list > li

	// Abstract styling
	.abstract {
		margin-bottom: @double;
		// Assuming .label or a heading tag is used for "Abstract" title
		// Text styling (font-size, line-height) inherited from body or .obj_article_details
	}

	// Keywords styling
	.keywords {
		margin-bottom: @double;

		// Assuming .label or a heading tag is used for "Keywords" title
		.value p, .value { // Assuming keywords are in a <p> or directly in .value
			display: flex; // Use flexbox for keyword badges
			flex-wrap: wrap; // Allow wrapping
			gap: 0.5em; // Space between keyword badges
		}

		.keyword { // Class for individual keyword items
			background-color: @bg-shade;
			color: @text;
			padding: 0.25em 0.75em; // Adjusted padding for better appearance
			border-radius: @radius;
			font-size: 0.9em; // Slightly smaller font for keywords
			// display: inline-block; // Not needed with flex parent
			// margin-right: 0.5em; // Handled by gap
			// margin-bottom: 0.5em; // Handled by gap and flex-wrap
		}
	}


	.main_entry {

		.label { // General style for labels like Abstract, Issue, etc.
			display: block; // Make label take full width
			font-family: @font-heading;
			font-size: 1.5em; // Make it like an H3/H4
			font-weight: @bold;
			padding-bottom: @half;
			margin-bottom: @base;
			border-bottom: 3px solid @accent;
			color: @text-strong; // Use a stronger color for labels
			text-transform: uppercase;
		}

		// Specific overrides for labels that should NOT look like big headings
		&.doi .label, // If .doi is a .main_entry itself
		&.keywords .label { // If .keywords is a .main_entry itself
			// This might need adjustment based on HTML. If .label is *inside* .doi or .keywords div,
			// then selectors like .doi > .label would be better.
			// For now, assuming .doi and .keywords might also be .main_entry blocks.
			display: inline; // Revert to inline for these specific labels if they are not titles
			font-size: 1em; // Revert font size
			font-weight: @normal;
			border: none;
			text-transform: none;
			color: @text-light-accessible; // Changed from @text-light
			margin-bottom: 0;
		}
	}

	// Section headings within the main article content (e.g. Introduction, Methods)
	// Assuming article content is in a div like .article_body_content
	.article_body_content {
		h2, h3, h4 { // Target h2, h3, h4 used as section titles
			// Should inherit font-family, size, weight from global H_ styles in components.less
			margin-top: @double;
			margin-bottom: @base;
		}
	}

	// References section styling
	.references {
		// Assuming "References" title is handled by .main_entry .label or a h_ tag
		margin-top: @double; // Space above references section
		margin-bottom: @double; // Space below references section

		ul, ol {
			padding-left: @double; // Standard indentation for lists
			list-style-position: outside;
		}

		li, p { // Target list items or paragraphs if references are not in a list
			margin-bottom: @half;
			line-height: @line-height-base; // Ensure consistent line height (assuming @line-height-base is defined, e.g. 1.6)

			a {
				color: @primary; // Ensure links within references use primary color
				text-decoration: none;
				word-break: break-all; // Break long URLs/DOIs

				&:hover, &:focus {
					text-decoration: underline;
				}
			}
		}
	}


	.row,
	.main_entry,
	.entry_details {
		border: none;
	}

	.author_bios {

		.sub_item {

			.label {
				border-bottom: none;
				text-transform: none;
			}
		}
	}

	.entry_details {
		margin-left: 0;
		margin-right: 0;

		.label {
			font-weight: @bold;
			text-transform: uppercase;
		}

		.item {
			margin: @triple 0;
			padding: 0;
			border-bottom: none;
			border-radius: @radius;
			background: @bg-light-shade;
			box-shadow: 0 0 1px rgba(0,0,0,0.4);

			.label + .value {
				border-top-left-radius: 0;
				border-top-right-radius: 0;
			}
		}

		.sub_item {
			padding: 0;
			margin-bottom: 0;

			&:last-child {
				margin-bottom: 0;
			}

			.label {
				color: @text-light-accessible; // Changed from @text-light
			}
		}

		.item > .label,
		.sub_item:first-child > .label {
			padding: 0.5em @double;
			background: @bg-shade;
			border-top-left-radius: @radius;
			border-top-right-radius: @radius;
		}

		.item > .value,
		.sub_item .value {
			padding: @double;
			border-radius: @radius;
		}

		// Create more light-weight headers for subsequent sub-item labels
		.sub_item:not(:first-child) .label {
			display: inline-block;
			padding: 0.5em 0;
			margin: 0 @double;
			border-bottom: 3px solid @accent;
		}

		.cover_image {
			background: transparent;
			box-shadow: none;

			img {
				display: block;
				border-radius: @radius;
				margin-left: auto;
				margin-right: auto;
			}
		}

		.item.galleys {
			box-shadow: none;

			.galleys_links {
				padding: 0;
			}
		}

		.galleys_links {

			> li {
				display: block;
				margin-bottom: 0.5em;

				&:last-child {
					margin-bottom: 0;
				}

				a {
					display: block;
				}
			}
		}

		.citation_display {
			margin-bottom: 0;
		}

		.item.copyright {
			background: transparent;
			box-shadow: none;
		}

		@media(min-width: @screen-tablet) {
			width: 240px;
			margin-left: 30px;
		}
	}
}
