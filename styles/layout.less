/**
 * @file plugins/themes/defaultManuscript/styles/index.less
 *
 * Copyright (c) 2014-2020 Simon Fraser University
 * Copyright (c) 2003-2020 John Willinsky
 * Distributed under the GNU GPL v2. For full terms see the file docs/COPYING.
 *
 * @brief Layout styles which implement the boxed layout
 *
 */

// A grey background on large screens
html,
body {
	background: @light-slate-gray; // Updated to use the new complementary color directly
	line-height: 1.6;
}

p {
	margin-bottom: 1em;
}

// A white background for the boxed content area
.pkp_structure_page {
	margin: 0 auto;
	max-width: @screen-lg-desktop-container;
	background: @bg; // Should still be #fff, contrast is good with light-slate-gray
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);

	@media(min-width: @screen-lg-desktop) {
		margin-top: @triple;
		margin-bottom: @triple;
		padding-top: 5em; // Adjusted for both fixed user nav and sticky primary nav
	}
}

@media (max-width: @screen-md-max) { // Assuming @screen-md-max is < @screen-desktop (e.g., <= 991px)
	.pkp_structure_page {
		// Adjust page padding for mobile if fixed headers are handled differently
		// For now, assume fixed headers might not be used or are simpler on mobile
		padding-top: @base; // Reduce top padding if sticky headers are desktop-only
	}

	.pkp_structure_main,
	.pkp_structure_sidebar {
		float: none;
		width: 100% !important; // Important to override potential inline styles or more specific rules
		margin-left: 0;
		margin-right: 0;
	}

	.pkp_structure_sidebar {
		padding: @base; // Add some padding for stacked sidebar

		&:before {
			display: none; // Hide the desktop sidebar border/background pseudo-element
		}
	}
}

.pkp_structure_footer_wrapper {
	background: @bg-light-shade; // Updated via variables.less
	border-top: @bg-border;
	border-bottom: @double solid @primary; // Changed to new @primary for branding
}

// Removes the left and right borders around the main content panel
.pkp_structure_main:before,
.pkp_structure_main:after {
	display: none;
}

.pkp_structure_main {
	padding: 1.5em; // Added padding
}

.pkp_structure_content {
	padding: 1.5em; // Changed from padding-top: 0; to general padding
}

.pkp_structure_sidebar {

	@media(min-width: @screen-desktop) {

		&:before {
			content: '';
			position: absolute;
			top: 0;
			right: 0;
			bottom: 0;
			width: 300px;
			border-left: @bg-border-color; // Updated to use the new variable
		}

		// Child elements need position to appear above the background element
		> * {
			position: relative;
		}
	}
}

// Font size adjustments for very small screens
@media (max-width: @screen-xs-max) { // Assuming @screen-xs-max is defined (e.g., <= 480px)
	html, body {
		font-size: 95%; // Slightly reduce base font size
	}

	.page_title, // Article Title on article detail page
	.h1 { // Global h1 class
		font-size: 2em; // Reduce from 2.5em
	}

	h2, .h2 {
		font-size: 1.75em; // Reduce from 2em
	}

	h3, .h3 {
		font-size: 1.5em; // Reduce from 1.75em
	}
	// Other elements like .pkp_site_name .is_text could also be adjusted if needed
}

// Center the content panel when no sidebar is present
// @todo This was added to the default theme after OJS 3.0.2 was released.
// The styles can be removed for future versions.
.pkp_structure_main:first-child:last-child {

	@media(min-width: @screen-desktop) {
		float: none;
		margin-left: auto;
		margin-right: auto;
		margin-top: @quadruple;

		// Aligns the left and right borders
		@no-sidebar-margins: @sidebar-width / 2;
		&:before {
			left: @no-sidebar-margins;
		}

		&:after {
			left: auto;
			right: @no-sidebar-margins;
		}
	}
}
